<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="webjars/bootstrap/4.5.0/css/bootstrap.min.css">
<link th:rel="stylesheet" th:href="@{/webjars/font-awesome/5.11.2/css/all.css}" />
</head>
<body>
	<div class="container">
		<div th:insert="layout/header :: header"></div>
		<ul class="nav nav-tabs" role="tablist">
			<li class="nav-item">
				<a id="formulario-tab"	th:classappend="${formTab}" class="btn btn-danger" href="#formulario"
				data-toggle="tab" role="tab" aria-controls="formulario"	aria-selected="true">Agregar Barrio</a></li>
			<li class="nav-item">
				<a id="lista-tab" class="btn btn-danger" th:classappend="${listTab}" href="#lista" data-toggle="tab"
				role="tab" aria-controls="lista" aria-selected="false">Lista de Barrios</a></li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane fade show" id="formulario"	th:classappend="${formTab}" role="tabpanel"	aria-labelledby="formulario-tab">
				<div class="card">
					<div class="card-header">
						<h4>Barrio</h4>
					</div>
					<div class="card-body">
						<form class="form" role="form" autocomplete="off" th:object="${barrio}" th:action="${editMode}?@{/editarBarrio}:@{/barrioForm}" method="post">
						
						<!-- es necesario para pasar la validacion -->							
						<input class="form-control" type=hidden th:field="${barrio.id}" th:if="${editMode}">
						<input class="form-control" type=hidden th:field="${barrio.nombre}" th:if="${editMode}">
	
							<div class="row">
								<div class="col">
									<div class="form-group row">
										<label class="col-lg-3 col-form-label form-control-label">Nombre:</label>
										<div class="col-lg-9">
											<input class="form-control" type="text"	th:field="${barrio.nombre}">
											<div class="alert-danger" th:if="${#fields.hasErrors('nombre')}" th:errors="*{nombre}">Name Error</div>
										</div>
									</div>
								</div>
								
							</div>
							<div class="form-group row">
								<div class="col-lg-12 text-center">
									<a class="btn btn-secondary" th:href="@{'/cancelar'}">Cancelar</a>
									<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalAgregar">Guardar Barrio</button>
								</div>
							</div>
							<div class="alert-danger text-center" th:if="${formBarrioErrorMessage}" th:text="${formBarrioErrorMessage}">Name Error</div>
							
							<!-- Modal Agregar -->
							<div class="modal fade" id="modalAgregar" tabindex="-1"	role="dialog" aria-labelledby="agregarModalTitulo"	aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="agregarModalTitulo">Confirmar Agregar</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body"><h6>Desea Modificar el Barrio?</h6></div>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary"	data-dismiss="modal">Cerrar</button>
											<input type="submit" class="btn btn-danger" value="Guardar Cambios"  th:value="${editMode}?'Guardar Barrio':'Crear Barrio'">
										</div>
									</div>
								</div>
							</div>

						</form>

					</div>
				</div>
			</div>
			<div class="tab-pane fade show" id="lista" role="tabpanel" th:classappend="${listTab}" aria-labelledby="lista-tab">
				<div class="card">
					<div class="card-header">
						<h4>Listado de Barrios</h4>
					</div>
					<div class="card-body">
						<table id="barrioList" class="table table-bordered table-hover table-striped">
							<thead class="thead-dark">
								<tr>
									<th scope="col">#</th>
									<th scope="col">Nombre</th>
									<th scope="col">Accion</th>
								</tr>
							</thead>
							<tbody>
								<tr class="table-danger" th:each="barrio : ${listaBarrios}">
									<td th:text="${barrio.id}"></td>
									<td th:text="${barrio.nombre}"></td>
									<td><a href="#" th:href="@{'/editarBarrio/'+${barrio.id}}">
									<i class="fa fa-edit"></i></a> | 
									<a href="#" th:onclick="'javascript:confirmarEliminar(\''+${barrio.id}+'\');'"><i class="fa fa-trash-alt"></i>
									</a></td>
								</tr>
							</tbody>
						</table>
						<div class="alert-danger text-center" th:if="${listBarrioErrorMessage}" th:text="${listBarrioErrorMessage}">Name Error</div>
						
						<!-- Script -->
<script type="text/javascript">
function confirmarEliminar(id){
	$('#modalEliminar').modal('show');
	$("#identificadorBarrioHiddenInput").val(id);
}

function eliminarBarrio(){
	var id = $("#identificadorBarrioHiddenInput").val();
    window.location = "eliminarBarrio/"+id;
}
</script>
						
						
						<!-- Modal Eliminar -->
							<div class="modal fade" id="modalEliminar" tabindex="-1"	role="dialog" aria-labelledby="eliminarModalTitulo"	aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title" id="eliminarModalTitulo">Confirmar Eliminar</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body"><h6>Desea eliminar Barrio?</h6></div>
										<input type="hidden" id="identificadorBarrioHiddenInput" name="barrioIdHiddenInput"/>
										<div class="modal-footer">
											<button type="button" class="btn btn-secondary"	data-dismiss="modal">Cerrar</button>
											<button type="button" class="btn btn-danger" th:onclick="eliminarBarrio()">Eliminar Barrio</button>
										</div>
									</div>
								</div>
							</div>
						
						
					</div>
				</div>
			</div>
		</div>		
		
		<div th:insert="layout/footer :: footer"></div>
		<script type="text/javascript" src="webjars/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="webjars/popper.js/1.16.0/popper.min.js"></script>
<script type="text/javascript" src="webjars/bootstrap/4.5.0/js/bootstrap.min.js"></script>
	</div>
</body>
</html>